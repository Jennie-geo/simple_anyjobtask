

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id    Int  @id @default(autoincrement())
  firstName String
  lastName String
  email String  @unique
  password String
  //account Invite[]
  account Account[]
  decision Decision @default(REJECTED)
  verifyAccount Boolean @default(false)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  @@map("users")
}

model Account {
  id Int @id @default(autoincrement())
  title String
  anyTarget Target @default(YES)
  methodofsaving SavingMethod @default (MANUAL)
  savingfrequency SavingFrequency @default(DAILY)
  whentoStart DateTime
  howmuchtosave Int
  datetostartsaving DateTime
  savingTimeLength SAVINGTIMELENGTH @default(THREE_MONTHS)
  
  creator     User    @relation(fields: [creatorId], references: [id])
  creatorId   Int
  members AccountMember[]
  startdate DateTime
  endDate DateTime

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

   @@map("account")
}

model AccountMember {
  id Int @id @default(autoincrement())
  
  acount Account @relation(fields: [accountId], references: [id])
  accountId Int
  relationshipWithBuddy String
  @@map("accountId ")
}

// model Invite {
//   createdAt DateTime @default(now())
//   roles UserRole

//   userId Int
//   user User @relation(fields: [userId], references: [id]) 
//   accountMemberId Int
//   account AccountMember @relation(fields: [accountMemberId], references: [id]) 

//   @@id([userId, accountMemberId])
// }

enum UserRole {
  ISADMIN
  USER
}

enum Decision {
  ACCEPTED
  REJECTED 
}

enum Target {
 YES
 NO
}
enum SavingMethod {
  AUTOMATIC
  MANUAL
}
enum SavingFrequency {
  DAILY
  WEEKLY
  MONTHLY
}
enum SAVINGTIMELENGTH {
THREE_MONTHS
SIX_MONTHS
ONE_YEAR
}
